<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TextWash ‚Äî Professional Text Cleaner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Favicon -->
  <link rel="icon" href="assets/favicon.ico" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ===== HOME PAGE ===== -->
  <div id="homePage" class="page">
    <!-- HERO / HEADER -->
    <header class="hero">
      <img src="assets/logo.png" alt="TextWash logo" class="logo">
      <p class="tagline">Universal Text Cleaner</p>
      <p class="subtitle">Professional text cleaning. AI when you need it.</p>
      <div class="cta-buttons">
        <button id="startFreeBtn" class="btn btn-primary">Start Free</button>
        <button id="viewPricingBtn" class="btn btn-secondary">View Pricing</button>
      </div>
    </header>

    <!-- FEATURES -->
    <section class="features">
      <div class="feature">
        <h3>‚ú® Basic Cleaning</h3>
        <p>Normalize whitespace, fix punctuation, and clean text instantly on all plans</p>
      </div>
      <div class="feature">
        <h3>ü§ñ AI Features</h3>
        <p>Pro plan includes spelling correction, grammar fixes, and smart rewrites</p>
      </div>
      <div class="feature">
        <h3>üîí 100% Local</h3>
        <p>No uploads, no tracking, no data collection. Pure local processing.</p>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <p>¬© 2026 TextWash ‚Ä¢ Built by Thomas Bontrager</p>
    </footer>
  </div>

  <!-- ===== PRICING PAGE ===== -->
  <div id="pricingPage" class="page hidden">
    <header class="section-header">
      <button class="back-btn" onclick="showPage('homePage')">‚Üê Back</button>
      <h1>Choose Your Plan</h1>
      <p>Start free. Upgrade anytime. No credit card required.</p>
    </header>

    <div class="pricing-container">
      <!-- FREE PLAN -->
      <div class="pricing-card">
        <h3>Free</h3>
        <p class="price">$0<span>/year</span></p>
        <p class="desc">No credit card required</p>
        <button class="btn btn-secondary" onclick="startPlan('free')">Get Started</button>
        <ul class="features-list">
          <li>‚úì Basic text cleaning</li>
          <li>‚úì Whitespace normalization</li>
          <li>‚úì Punctuation fixes</li>
          <li>‚úó No AI features</li>
        </ul>
      </div>

      <!-- STARTER PLAN -->
      <div class="pricing-card">
        <h3>Starter</h3>
        <p class="price">$29<span>/year</span></p>
        <p class="desc">14-day free trial</p>
        <button class="btn btn-primary" onclick="startPlan('starter')">Start Free Trial</button>
        <ul class="features-list">
          <li>‚úì Everything in Free</li>
          <li>‚úì Enhanced local cleaning</li>
          <li>‚úì Priority support</li>
          <li>‚úó No AI features</li>
        </ul>
      </div>

      <!-- PRO PLAN -->
      <div class="pricing-card best-value">
        <div class="badge">‚≠ê Best Value</div>
        <h3>Pro</h3>
        <p class="price">$99<span>/year</span></p>
        <p class="desc">14-day free trial ‚Ä¢ <strong>$8.25/month</strong></p>
        <button class="btn btn-accent" onclick="startPlan('pro')">Start Free Trial</button>
        <ul class="features-list">
          <li>‚úì Everything in Starter</li>
          <li>‚úì AI spelling & grammar</li>
          <li>‚úì Smart rewrite modes</li>
          <li>‚úì Context-aware AI</li>
          <li>‚úì All future AI upgrades</li>
        </ul>
      </div>
    </div>

    <!-- COMPARISON TABLE -->
    <section class="comparison-table">
      <h2>Full Feature Comparison</h2>
      <table>
        <thead>
          <tr>
            <th>Feature</th>
            <th>Free</th>
            <th>Starter</th>
            <th>Pro</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Basic cleaning</td>
            <td>‚úì</td>
            <td>‚úì</td>
            <td>‚úì</td>
          </tr>
          <tr>
            <td>Enhanced cleaning</td>
            <td>‚úó</td>
            <td>‚úì</td>
            <td>‚úì</td>
          </tr>
          <tr>
            <td>Priority support</td>
            <td>‚úó</td>
            <td>‚úì</td>
            <td>‚úì</td>
          </tr>
          <tr>
            <td>AI spelling & grammar</td>
            <td>‚úó</td>
            <td>‚úó</td>
            <td>‚úì</td>
          </tr>
          <tr>
            <td>Smart rewrites</td>
            <td>‚úó</td>
            <td>‚úó</td>
            <td>‚úì</td>
          </tr>
          <tr>
            <td>Context-aware AI</td>
            <td>‚úó</td>
            <td>‚úó</td>
            <td>‚úì</td>
          </tr>
          <tr>
            <td>Future AI upgrades</td>
            <td>‚úó</td>
            <td>‚úó</td>
            <td>‚úì</td>
          </tr>
        </tbody>
      </table>
    </section>

    <footer>
      <p>¬© 2026 TextWash ‚Ä¢ Built by Thomas Bontrager</p>
    </footer>
  </div>

  <!-- ===== AUTH PAGE ===== -->
  <div id="authPage" class="page hidden">
    <div class="auth-container">
      <div class="auth-card">
        <img src="assets/logo.png" alt="TextWash" class="auth-logo">
        <h1>Welcome to TextWash</h1>

        <div class="auth-tabs">
          <button class="tab-btn active" onclick="switchAuthTab('login')">Sign In</button>
          <button class="tab-btn" onclick="switchAuthTab('signup')">Sign Up</button>
        </div>

        <!-- LOGIN FORM -->
        <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input type="email" id="loginEmail" required placeholder="you@example.com">
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
          <button type="submit" class="btn btn-primary full">Sign In</button>
          <p class="error" id="loginError"></p>
        </form>

        <!-- SIGNUP FORM -->
        <form id="signupForm" class="auth-form" onsubmit="handleSignup(event)">
          <div class="form-group">
            <label for="signupEmail">Email</label>
            <input type="email" id="signupEmail" required placeholder="you@example.com">
          </div>
          <div class="form-group">
            <label for="signupPassword">Password</label>
            <input type="password" id="signupPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
          <div class="form-group">
            <label for="signupPassword2">Confirm Password</label>
            <input type="password" id="signupPassword2" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
          <button type="submit" class="btn btn-primary full">Create Account</button>
          <p class="error" id="signupError"></p>
        </form>
      </div>
    </div>
  </div>

  <!-- ===== DASHBOARD PAGE ===== -->
  <div id="dashboardPage" class="page hidden">
    <header class="dashboard-header">
      <div class="header-left">
        <img src="assets/logo.png" alt="TextWash" class="logo-small">
        <h1>TextWash</h1>
      </div>
      <div class="header-right">
        <span id="userPlanBadge" class="plan-badge">Free</span>
        <button class="btn btn-small" onclick="showAccountMenu()">Account</button>
        <div id="accountMenu" class="account-menu hidden">
          <a href="#" onclick="showPage('accountPage')">Manage Account</a>
          <a href="#" onclick="handleLogout()">Sign Out</a>
        </div>
      </div>
    </header>

    <main class="app">
      <textarea id="input" placeholder="Paste your messy text here..."></textarea>

      <div class="button-group">
        <button id="cleanBtn" class="btn btn-primary">Clean Text</button>
        <div id="aiButtonsGroup" class="hidden">
          <button id="aiSpellBtn" class="btn btn-accent">AI: Spelling & Grammar</button>
          <button id="aiRewriteBtn" class="btn btn-accent">AI: Rewrite</button>
        </div>
      </div>

      <textarea id="output" placeholder="Clean text appears here..." readonly></textarea>

      <button id="copyBtn" class="btn btn-secondary">Copy Clean Text</button>
    </main>

    <section class="upgrade-prompt" id="upgradePrompt">
      <p>üöÄ Upgrade to <strong>Pro</strong> to unlock AI features ($99/year)</p>
      <button class="btn btn-accent" onclick="showPage('pricingPage')">See Plans</button>
    </section>

    <footer>
      <p>¬© 2026 TextWash ‚Ä¢ Built by Thomas Bontrager</p>
    </footer>
  </div>

  <!-- ===== ACCOUNT PAGE ===== -->
  <div id="accountPage" class="page hidden">
    <header class="section-header">
      <button class="back-btn" onclick="showPage('dashboardPage')">‚Üê Back</button>
      <h1>Account Settings</h1>
    </header>

    <div class="account-container">
      <section class="account-section">
        <h2>Subscription</h2>
        <div id="subscriptionInfo"></div>
        <button id="cancelSubBtn" class="btn btn-danger" onclick="cancelSubscription()">Cancel Subscription</button>
      </section>

      <section class="account-section">
        <h2>Billing Portal</h2>
        <p>Manage your payment methods and subscription from the Stripe portal</p>
        <button class="btn btn-secondary" onclick="openStripePortal()">Open Billing Portal</button>
      </section>

      <section class="account-section">
        <h2>Sign Out</h2>
        <button class="btn btn-secondary" onclick="handleLogout()">Sign Out</button>
      </section>
    </div>

    <footer>
      <p>¬© 2026 TextWash ‚Ä¢ Built by Thomas Bontrager</p>
    </footer>
  </div>

  <!-- ===== ADMIN PANEL ===== -->
  <div id="adminPage" class="page hidden">
    <header class="admin-header">
      <h1>Admin Control Panel</h1>
      <button class="back-btn" onclick="handleLogout()">Sign Out</button>
    </header>

    <div class="admin-container">
      <!-- TAB NAVIGATION -->
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="switchAdminTab('stripe')">Stripe Config</button>
        <button class="admin-tab" onclick="switchAdminTab('users')">Users</button>
      </div>

      <!-- STRIPE CONFIG TAB -->
      <div id="stripeTab" class="admin-tab-content active">
        <h2>Stripe Configuration</h2>
        <form id="stripeConfigForm" onsubmit="handleStripeConfig(event)">
          <div class="form-group">
            <label for="publishableKey">Publishable Key</label>
            <input type="text" id="publishableKey" placeholder="pk_test_..." required>
          </div>
          <div class="form-group">
            <label for="secretKey">Secret Key</label>
            <input type="password" id="secretKey" placeholder="sk_test_...">
            <small>Leave blank to keep current key</small>
          </div>
          <div class="form-group">
            <label for="webhookSecret">Webhook Secret</label>
            <input type="password" id="webhookSecret" placeholder="whsec_...">
            <small>Leave blank to keep current secret</small>
          </div>
          <button type="submit" class="btn btn-primary">Save Configuration</button>
          <p class="error" id="configError"></p>
        </form>
      </div>

      <!-- USERS TAB -->
      <div id="usersTab" class="admin-tab-content hidden">
        <h2>User Management</h2>
        <div id="usersList" class="users-list"></div>
      </div>
    </div>

    <footer>
      <p>¬© 2026 TextWash ‚Ä¢ Admin Panel</p>
    </footer>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
